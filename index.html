<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Quiz Module - HTML CSS JS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
  <script src="main.js" defer></script>
</head>
<body>
  <header class="topbar">
    <h1>Quiz Module</h1>
    <nav>
      <button class="link-btn" onclick="showSection('home')">Home</button>
    </nav>
  </header>

  <main class="container">

    <!-- Home: select role -->
    <section id="home" data-section>
      <div class="card center">
        <h2>Select Portal</h2>
        <div class="row">
          <button class="btn primary" onclick="showSection('student-login')">
            Student Portal
          </button>
          <button class="btn secondary" onclick="showSection('teacher-login')">
            Teacher Portal
          </button>
        </div>
        <p class="hint">All data is stored in this browser using localStorage.</p>
      </div>
    </section>

    <!-- Student Login -->
    <section id="student-login" data-section class="hidden">
      <div class="card">
        <h2>Student Login</h2>
        <label>Registration Number</label>
        <input id="student-reg" type="text" placeholder="e.g. S-1001" />
        <label>Name</label>
        <input id="student-name" type="text" placeholder="Your full name" />
        <div class="row space-between">
          <button class="btn" onclick="showSection('home')">Back</button>
          <button class="btn primary" onclick="handleStudentLogin()">Login</button>
        </div>
      </div>
    </section>

    <!-- Student Dashboard -->
    <section id="student-dashboard" data-section class="hidden">
      <div class="card">
        <div class="row space-between">
          <h2 id="student-dashboard-title">Student Dashboard</h2>
          <button class="btn danger" onclick="studentLogout()">Logout</button>
        </div>
      </div>

      <div class="grid">
        <div class="card">
          <h3>Live Exams</h3>
          <div id="live-exams-list"></div>
        </div>

        <div class="card">
          <h3>Past Exams</h3>
          <div id="past-exams-list"></div>
        </div>
      </div>
    </section>

    <!-- Student Exam -->
    <section id="student-exam" data-section class="hidden">
      <div class="card">
        <div class="row space-between">
          <div>
            <h2 id="exam-title"></h2>
            <p id="exam-topic" class="muted"></p>
          </div>
          <div class="timer-box">
            Time Left: <span id="exam-timer">--:--</span>
          </div>
        </div>
        <button class="btn danger" onclick="submitCurrentExam()">Submit Now</button>
      </div>

      <div id="exam-questions"></div>
    </section>

    <!-- Student Result (after submit) -->
    <section id="student-result" data-section class="hidden">
      <div class="card">
        <h2>Exam Result</h2>
        <p id="result-summary"></p>
        <button class="btn" onclick="goToStudentDashboard()">Back to Dashboard</button>
      </div>
      <div id="result-details"></div>
    </section>

    <!-- Student Past Attempt Detail -->
    <section id="student-past" data-section class="hidden">
      <div class="card">
        <h2>Past Attempt</h2>
        <button class="btn" onclick="goToStudentDashboard()">Back to Dashboard</button>
      </div>
      <div id="past-attempt-details"></div>
    </section>

    <!-- Teacher Login -->
    <section id="teacher-login" data-section class="hidden">
      <div class="card">
        <h2>Teacher Login</h2>
        <label>Teacher ID</label>
        <input id="teacher-id" type="text" placeholder="e.g. T-9001" />
        <label>Name</label>
        <input id="teacher-name" type="text" placeholder="Your full name" />
        <div class="row space-between">
          <button class="btn" onclick="showSection('home')">Back</button>
          <button class="btn primary" onclick="handleTeacherLogin()">Login</button>
        </div>
      </div>
    </section>

    <!-- Teacher Dashboard -->
    <section id="teacher-dashboard" data-section class="hidden">
      <div class="card">
        <div class="row space-between">
          <h2 id="teacher-dashboard-title">Teacher Dashboard</h2>
          <button class="btn danger" onclick="teacherLogout()">Logout</button>
        </div>
        <button class="btn primary" onclick="showSection('teacher-create-quiz')">
          + Create New Quiz
        </button>
      </div>

      <div class="card">
        <h3>Your Quizzes</h3>
        <div id="teacher-quizzes-list"></div>
      </div>
    </section>

    <!-- Teacher Create Quiz -->
    <section id="teacher-create-quiz" data-section class="hidden">
      <div class="card">
        <h2>Create Quiz</h2>
        <label>Quiz Title</label>
        <input id="quiz-title" type="text" placeholder="e.g. C Programming Basics" />
        <label>Topic</label>
        <input id="quiz-topic" type="text" placeholder="e.g. Loops, Arrays" />
        <label>Duration (minutes)</label>
        <input id="quiz-duration" type="number" value="17" min="1" />
      </div>

      <div class="card">
        <h3>Add Questions</h3>
        <p class="hint">Recommended: add 10 questions.</p>
        <label>Question Text</label>
        <textarea id="q-text" rows="2"></textarea>
        <label>Option A</label>
        <input id="q-a" type="text" />
        <label>Option B</label>
        <input id="q-b" type="text" />
        <label>Option C</label>
        <input id="q-c" type="text" />
        <label>Option D</label>
        <input id="q-d" type="text" />
        <label>Correct Option</label>
        <select id="q-correct">
          <option value="0">A</option>
          <option value="1">B</option>
          <option value="2">C</option>
          <option value="3">D</option>
        </select>
        <label>Explanation (shown after exam)</label>
        <textarea id="q-expl" rows="2"></textarea>

        <div class="row space-between">
          <button class="btn" onclick="showSection('teacher-dashboard')">Cancel</button>
          <button class="btn secondary" onclick="addQuestionToNewQuiz()">Add Question</button>
        </div>
      </div>

      <div class="card">
        <h3>Questions in this Quiz</h3>
        <div id="new-quiz-questions-list"></div>
        <div class="row space-between">
          <button class="btn" onclick="clearNewQuiz()">Clear All</button>
          <button class="btn primary" onclick="saveNewQuiz()">Save Quiz</button>
        </div>
      </div>
    </section>

  </main>
</body>
</html>
